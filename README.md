# Retrieval-Augmented Generation (RAG) API

## Overview

This project is a small-scale FastAPI-based RAG system that retrieves relevant document chunks from a PostgreSQL database and generates answers using a T5 model. The system leverages PostgreSQL with the `pgvector` extension for vector similarity search, facilitating retrieval of relevant documents to augment responses generated by a language model.

## Features
✅ Load and process multiple text documents  
✅ Store document embeddings in PostgreSQL (pgvector)  
✅ Retrieve top-k relevant document chunks based on similarity  
✅ Generate responses using a fine-tuned `T5` model  
✅ FastAPI for a RESTful API interface  

## Installation

### Prerequisites

- Python 3.8+
- PostgreSQL with `pgvector` extension installed

### Steps

1. Clone the repository:

   ```bash
   git clone <repository_url>
   cd rag-system
   ```

2. Set up a virtual environment:

   ```bash
   python -m venv venv
   source venv/bin/activate   # On Windows, use `venv\Scripts\activate`
   ```

3. Install dependencies:

   ```bash
   pip install -r requirements.txt
   ```

4. Configure PostgreSQL:

   - Ensure PostgreSQL is installed and running.
   - Enable the `pgvector` extension in your database:

     ```sql
     CREATE EXTENSION IF NOT EXISTS vector;
     ```

   - Create a database and configure its connection details in the `.env` file.


## Usage

### 1. Running the API  

Start the FastAPI server with **Uvicorn**:  
```bash
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

### 2. Upload Documents
**`POST /upload_document`**
- Uploads a document, extracts embeddings, and stores them in the database.

```bash
curl -X 'POST' 'http://127.0.0.1:8000/upload_document' \
  -F 'file=@sample.txt'
```
### 3. Query the model
```bash
curl -X 'POST' 'http://127.0.0.1:8000/query' \
  -H 'Content-Type: application/json' \
  -d '{ "question": "What is FastAPI?" }'
```

## Project Structure

- `main.py`: Entry point for the system (not needed when using wia API).
- `database.py`: Handles database connections and operations.
- `file_loader.py`: Handles input documents (not needed when using wia API).
- `embedding.py`: Generates and manages vector embeddings and chunking.
- `generation_model.py`: Core logic for retrieval and augmentation.
- `requirements.txt`: List of required Python libraries.
- `app.py`: Handles API main 


## Future Improvements
- [ ] Add authentication for API endpoints
- [ ] Implement caching for faster retrieval
- [ ] Support multiple file formats (PDF, DOCX, etc.)
- [ ] Deploy on cloud services (AWS/GCP)
- [ ] Utilize fine-tuned model
